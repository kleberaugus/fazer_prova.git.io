<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leitor de PDF com Radio Buttons</title>
    <script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
</head>
<body>
    <h1>Leitor de PDF com Radio Buttons</h1>
    <input type="file" id="pdf-input" accept="application/pdf">
    <div id="pdf-viewer"></div>

    <script>
        // Configuração do worker
        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://mozilla.github.io/pdf.js/build/pdf.worker.js';
        }

        // Elementos da interface
        const pdfInput = document.getElementById('pdf-input');
        const pdfViewer = document.getElementById('pdf-viewer');

        // Quando o usuário seleciona um PDF
        pdfInput.addEventListener('change', function (event) {
            const file = event.target.files[0];
            if (file && file.type === 'application/pdf') {
                const fileReader = new FileReader();
                fileReader.onload = function () {
                    const typedArray = new Uint8Array(this.result);
                    loadPDF(typedArray);
                };
                fileReader.readAsArrayBuffer(file);
            } else {
                alert('Por favor, selecione um arquivo PDF válido.');
            }
        });

        // Carregar o PDF
        function loadPDF(data) {
            pdfjsLib.getDocument({ data }).promise.then(pdf => {
                pdfViewer.innerHTML = ''; // Limpar o visualizador
                let pageNumber = 1;

                // Função para renderizar uma página
                const renderPage = (pageNum) => {
                    pdf.getPage(pageNum).then(page => {
                        const scale = 1.5;
                        const viewport = page.getViewport({ scale });

                        // Criar canvas para renderização
                        const canvas = document.createElement('canvas');
                        const context = canvas.getContext('2d');
                        canvas.height = viewport.height;
                        canvas.width = viewport.width;
                        pdfViewer.appendChild(canvas);

                        // Renderizar a página
                        page.render({
                            canvasContext: context,
                            viewport: viewport
                        });

                        // Extrair o texto da página
                        page.getTextContent().then(textContent => {
                            const textItems = textContent.items;
                            const textLines = [];

                            // Agrupar texto por linhas
                            let currentLine = '';
                            let currentY = null;

                            textItems.forEach(item => {
                                const y = item.transform[5];
                                if (currentY !== y) {
                                    if (currentLine) textLines.push(currentLine);
                                    currentLine = item.str;
                                    currentY = y;
                                } else {
                                    currentLine += item.str;
